<?xml version='1.1' encoding='UTF-8'?>

<!--
 * See the NOTICE file distributed with this work for additional
 * information regarding copyright ownership.
 *
 * This is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as
 * published by the Free Software Foundation; either version 2.1 of
 * the License, or (at your option) any later version.
 *
 * This software is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this software; if not, write to the Free
 * Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
 * 02110-1301 USA, or see the FSF site: http://www.fsf.org.
-->
<xwikidoc version="1.4" reference="AdminTools.Code.Macros" locale="">
  <web>AdminTools.Code</web>
  <name>Macros</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <parent>AdminTools.WebHome</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <version>1.1</version>
  <title>Macros</title>
  <comment/>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>true</hidden>
  <content>{{velocity output='false'}}
#macro (viewLastNLinesMoldal $id)
  #set ($modalId = $id + 'ViewLastNLinesModal')
  {{html clean='false'}}
    &lt;div class="modal fade" id="${modalId}" tabindex="-1" role="dialog" aria-labelledby="${modalId}Label">
      &lt;div class="modal-dialog modal-sm" role="document">
        &lt;div class="modal-content">
          &lt;div class="logs-modal-content">
            &lt;div class="modal-header">
              &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close">
                &lt;span aria-hidden="true">&amp;times;&lt;/span>&lt;/button>
              &lt;h1 class="modal-title">
                $escapetool.xml($services.localization.render('adminTools.dashboard.logs.modal.title'))
              &lt;/h1>
            &lt;/div>
            &lt;div class="modal-body">
              &lt;form class="xform" action="$request.getContextPath()/rest/admintools/files/logsDataResource">
                &lt;dl>
                  &lt;dt>
                    &lt;label for="noLines">$escapetool.xml($services.localization.render(
                      'adminTools.dashboard.logs.modal.nLines.label')) &lt;/label>
                    &lt;span class="xHint">$escapetool.xml($services.localization.render(
                      'adminTools.dashboard.logs.modal.nLines.hint'))&lt;/span>
                  &lt;/dt>
                  &lt;dd>&lt;input type="number" name="noLines" placeholder="1000">&lt;/dd>
                &lt;/dl>
              &lt;/form>
            &lt;/div>
            &lt;div class="modal-footer">
              &lt;button type="button" class="btn btn-primary">
                $escapetool.xml($services.localization.render('adminTools.dashboard.logs.modal.submit'))&lt;/button>
              &lt;button type="button" class="btn btn-default" data-dismiss="modal">
                $escapetool.xml($services.localization.render('cancel'))&lt;/button>
            &lt;/div>
          &lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  {{/html}}
#end
#macro (downloadArchiveModal)

  {{html clean='false'}}
    &lt;div class="modal fade" id="downloadFilesModal" tabindex="-1" role="dialog" aria-labelledby=
      "downloadFilesModalLabel">
      &lt;div class="modal-dialog" role="document">
        &lt;div class="modal-content">
          &lt;div class="modal-header">
            &lt;button type="button" class="close" data-dismiss="modal" aria-label="Close">
              &lt;span aria-hidden="true">&amp;times;&lt;/span>&lt;/button>
            &lt;h1 class="modal-title">
              $escapetool.xml($services.localization.render('adminTools.dashboard.download.modal.title'))
            &lt;/h1>
          &lt;/div>
          &lt;div class="modal-body">
            &lt;form class="xform" action="$request.getContextPath()/rest/admintools/files">
              &lt;div class="download-modal-content">
                &lt;dl>
                  &lt;dt>&lt;label>&lt;input type="checkbox" name="files" value="xwikiConfig" checked>
                      $escapetool.xml($services.localization.render(
                      'adminTools.dashboard.download.modal.xwikiConfig.title'))
                    &lt;/label>
                  &lt;/dt>
                  &lt;dt>&lt;label>&lt;input type="checkbox" name="files" value="xwikiProperties" checked>
                      $escapetool.xml($services.localization.render(
                      'adminTools.dashboard.download.modal.xwikiProperties.title'))
                    &lt;/label>
                  &lt;/dt>
                  &lt;dt>
                    &lt;label>&lt;input type="checkbox" name="files" value="dataProviderResource" checked>
                      $escapetool.xml($services.localization.render('adminTools.dashboard.download.modal.provided'))
                    &lt;/label>
                  &lt;/dt>
                  &lt;dt>
                    &lt;label>&lt;input type="checkbox" name="files" value="logsDataResource" checked>
                      $escapetool.xml($services.localization.render('adminTools.dashboard.download.modal.logs.title'))
                    &lt;/label>
                  &lt;/dt>
                  &lt;dt>
                    &lt;div class="dateFields">
                      #set ($defaultDateFormat = 'dd-MM-yyyy')
                      #set ($dateFormat = $xwiki.getXWikiPreference('dateformat', $defaultDateFormat))
                      &lt;label for="downloadFilesModalFromDate">$escapetool.xml($services.localization.render(
                        'adminTools.dashboard.download.modal.date.from'))
                      &lt;/label>
                      #set ($dateFromParams = {
                        'id': "downloadFilesModalFromDate",
                        'name': 'from',
                        'data-format': $dateFormat,
                        'placeholder': $escapetool.xml($services.localization.render(
                          'adminTools.dashboard.download.modal.logs.filter.placeholder.from'))
                      })
                      #dateTimePicker($dateFromParams)
                      &lt;label for="downloadFilesModalToDate">$escapetool.xml($services.localization.render(
                        'adminTools.dashboard.download.modal.date.to'))
                      &lt;/label>
                      #set ($dateToParams = {
                        'id': "downloadFilesModalToDate",
                        'name': 'to',
                        'data-format': $dateFormat,
                        'placeholder': $escapetool.xml($services.localization.render(
                          'adminTools.dashboard.download.modal.logs.filter.placeholder.to'))
                      })
                      #dateTimePicker($dateToParams)
                    &lt;/div>
                  &lt;/dt>
                &lt;/dl>
              &lt;/div>
            &lt;/form>
          &lt;/div>
          &lt;div class="modal-footer">
            &lt;button type="button" class="btn btn-primary">
              $escapetool.xml($services.localization.render('adminTools.dashboard.download.modal.button'))&lt;/button>
            &lt;button type="button" class="btn btn-default" data-dismiss="modal">
              $escapetool.xml($services.localization.render('cancel'))&lt;/button>
          &lt;/div>
        &lt;/div>
      &lt;/div>
    &lt;/div>
  {{/html}}
#end
{{/velocity}}</content>
</xwikidoc>